10cls:color15,1,1:keyoff
20defusr=&h003B:a=usr(0):defusr1=&h003E:a=usr1(0):defusr2=&H90:a=usr2(0):defusr3=&h41:defusr4=&h44
30screen2,2,0
40definta-z
50open"grp:"as#1
70 me$="Loading sprites":gosub 2000
80gosub9000
90 me$="Loading tileset":gosub 2000
100gosub10000
110me$="":ONINTERVAL=50GOSUB21000
120f=1:ts=37:td=30:mc=0:ml=60:dimm(100,16)
125gosub20200
130gosub1800
140x=0:y=9*8:v=8:P=0:P0=0:P1=1:P2=2:P3=3:P4=4:P5=5:PUTSPRITE0,(x,y),4,p
150goto500
200s=STICK(0)ORSTICK(1)
210ONsGOTO230,250,270,290,310,330,350,370
220goto400
230Y=Y-4:P=P4:SWAPP4,P5
240GOTO400
250X=X+4:ifa=0andt5>=tstheno=y:a=1
260P=P0:SWAPP0,P1:GOTO400
270X=X+v
280P=P0:SWAPP0,P1:GOTO400
290X=X+v
300P=P0:SWAPP0,P1:GOTO400
310Y=Y+4
320P=P4:SWAPP4,P5:GOTO400
330'Y=Y+4:X=X-4
340P=P2:SWAPP2,P3:GOTO400
350X=X-v
360P=P2:SWAPP2,P3:GOTO400
370X=X-v:ifa=0andt5>=tstheno=y:a=1
380P=P2:SWAPP2,P3
400IFY<56THENY=56elseify>120theny=120
410ifx<0thenx=0elseifx>240thenx=240
450hl=base(10)+(((y/8)+2)*32)+((x/8)+1):t5=vpeek(hl)
470ift5=tdort3=tdort7=tdthengosub4000
480PUTSPRITE0,(X,Y),4,P
482mc=time/50
483ifmc>=mlthenintervaloff
484gosub2100
485'gosub3000
490ONfGOSUB530,630,730,930,1130,1330,1530
495goto200
500'restore22000
501gosub21000
503time=0:intervalon
510'seinicializanosenemigos,sepintanlosobjetosyelmarcador
520goto200
530ifmc=mlthenprint#1,"fasecompletada":goto600
540'pintamoslosenemigos
550'Actualizamoslosenemigos
590return200
600f=2:x=0:y=9*8:gosub21000
610goto200
630ifx>232thengoto700
640'lomismoqueenlafase1
690return200
700f=3:x=0:y=9*8:gosub21000
710goto200
730ifx>232thengoto1700
740'lomismoqueenlafase1
790return200
900f=4:x=0:y=9*8:gosub21000
910goto200
930ifx>240thengoto1100
940'lomismoqueenlafase1
990return200
1100f=5:x=0:y=9*8:gosub21000
1110goto200
1130ifx>240thengoto1300
1140'lomismoqueenlafase1
1190return200
1300f=6:x=0:y=9*8:gosub21000
1310goto200
1330ifx>240thengoto1500
1340'lomismoqueenlafase1
1390return200
1500f=7:x=0:y=9*8:gosub21000
1510goto200
1530ifx>240thengoto1700
1590return200
    1700 me$="Tu ganas":gosub 2000
1710ONSTRIGGOSUB1790:STRIG(0)ON
1720GOTO1720
1790STRIG(0)OFF:RETURN110
    1800 me$="menu pricipal, pulse una tecla":gosub 2000
1810ONSTRIGgosub1890:STRIG(0)ON
1820GOTO1820
1890STRIG(0)OFF:RETURN140
2000line(0,140)-(255,150),1,bf
2010preset(0,140):print#1,me$
2020return
2100line(200,160)-(220,170),1,bf
2110preset(200,160):print#1,mc
2190return
3000line(0,160)-(200,180),1,bf
3010preset(0,160):print#1,t3
3090return
4000x=0:y=9*8
4090return
20200restore22000:po=0
20210forf=0to15:READmp$:po=0
20220forc=0tolen(mp$)step2
20230tn$=mid$(mp$,c+1,2)
20240tn=val("&h"+tn$)
20250tn=tn-1:iftn=0andtn=-1thentn=0
20270m(po,f)=tn:po=po+1
20280nextc
20290nextf
20299return
21000_TURBOON(m(),mc)
21005md=6144
21010forf=0to15
21020forc=mcto31+mc
21030tn=m(c,f)
21040VPOKEmd,tn
21050md=md+1
21060nextc
21070nextf
21080_TURBOOFF
22000data23232323232323232323232323232323232323232323232323232323252523232325232323232323232525232323232323232323232323232323232323232323232525232525252525252523232323232323232323232323232325232525232325252525
22010data23232323232323232323232323232323232323252523232323232323252523232525232323232323232525232323232525232525232323232323232323232323232525252525252525252523232523232323232323252523232525232525232325252525
22020data23252523232323232323232323232525232323252523232323232525252523232525232323232325252525232323232525232525232325232323252523232325252525252525252525252523232525232323252523252523232525232525232325252525
22030data23252523232525232323232323232525232525252523232323232525252523232525232323232325252525232525232525232525232325232323252523232325252525252525252525252523232525232323252523252523232525232525232325252525
22040data23252523232525232323232323232525232525252523232325252525252523232525232525232325252525232525232525232525232325232323252523232325252525252525252525252523232525232323252523252523232525232525232525252525
22050data23252523232525252323232325252525232525252523232325252525252523232525232525232325252525232525232525232525252525232323252523232325252525252525252525252523232525232323252523252523232525232525232525252525
22060data25252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525
22070data21212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121
22080data21212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212145212121212121212121212121212121212121212121472121212121212121212121
22090data21212121212121212121212121212121212121212121212121212121212148484848484848484848484848484848484848484848484848484848484848484848484845212121484848484848484848484848484848484848472121212121212121212121
22100data21212121212121212121212121212121212121212121212121212121212148212121212121212121212121212148212121212121212121212121212121212121212145212121482121212121212121212121212121212121472121212121212121484821
22110data21212148484848484848484848484848484848484848484848484848484848212121212121212121212121212148484848484848484848484848484821212121212121212121484848484848484848484848484848484848484848484848484848484821
22120data21212121212121212121212121212121212121212121212121212121212148212121212121212121212121462121212121212121212121212121214821212121212121212121482121212121214721212121212121212121212121212121212121484821
22130data21212121212121212121212121212121212121212121212121212121212148212121212121212121484848462121212121212121212121212121214848484848484848484848484848484848484721212121212121212121212121212121212121212121
22140data21212121212121212121212121212121212121212121212121212121212148484848484848484848482121462121212121212121212121212121212121212121212121212121212121212121214721212121212121212121212121212121212121212121
22150data21212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121214721212121212121212121212121212121212121212121
23180me$=str$(f):gosub2000
23190return
9000fori=0to31:putspritei,(0,212),0,0:nexti
9010'callturboon
9020fori=0to(32*6)-1
9030readb:vpoke14336+i,b
9040nexti
9050'callturbooff
9360data0,0,0,0,33,195,192,192
9370data192,63,63,62,96,160,240,240
9380data0,0,0,224,208,252,108,112
9390data240,240,240,240,248,102,54,48
9400remdatadefinitionsprite1,name:Sprite-1
9410data0,0,0,0,0,0,240,112
9420data48,15,15,15,15,5,6,6
9430data0,0,240,120,116,31,27,28
9440data60,252,252,188,48,176,176,248
9445data0,0,0,7,11,63,54,14
9450data15,15,15,15,31,102,108,12
9460data0,0,0,0,132,194,2,2
9470data2,252,252,124,6,4,14,14
9480remdatadefinitionsprite3,name:Sprite-3
9490data0,0,15,30,46,248,216,56
9500data60,63,63,61,12,13,13,31
9510data0,0,0,0,0,0,14,14
9520data12,240,240,240,240,160,96,96
9530remdatadefinitionsprite4,name:Sprite-3
9540data0,0,7,15,31,7,3,3
9550data3,7,15,15,15,6,6,15
9560data0,0,192,224,240,192,128,128
9570data128,192,224,224,224,192,192,224
9580remdatadefinitionsprite5,name:Sprite-3
9590data0,0,7,15,31,7,3,3
9600data19,15,15,15,15,12,16,0
9610data0,0,192,224,240,192,128,128
9620data144,224,224,224,224,192,32,0
9990return
10000'callturboon
10005FORt=6144TO(6144+768)-256
10010vpoket,255
10020nextt
10030restore10040:FORI=0TO(79*8)-1
10035READA$
10036VPOKEI,VAL("&H"+A$)
10037VPOKE2048+I,VAL("&H"+A$)
10038NEXTI
10040DATAE7,40,20,7E,3C,18,00,00
10050DATA18,3C,3C,18,00,56,56,74
10060DATA00,06,0A,14,20,30,48,00
10070DATA00,00,00,08,10,20,40,00
10080DATA00,00,00,18,2C,2C,18,00
10090DATA00,18,3C,42,42,42,42,00
10100DATA04,08,18,3C,3C,3C,3C,00
10110DATA00,3E,22,3E,00,08,08,00
10120DATA08,14,2A,08,08,08,08,00
10130DATA00,04,02,7D,02,04,00,00
10140DATA00,20,40,BE,40,20,00,00
10150DATA10,10,10,54,28,10,00,00
10160DATA00,00,00,00,00,00,00,00
10170DATA00,00,00,00,00,00,00,00
10180DATA00,00,00,00,00,00,00,00
10190DATA00,00,00,00,00,00,00,00
10200DATA00,00,00,00,00,00,00,00
10210DATA00,00,00,00,00,00,00,00
10220DATA00,00,00,00,00,00,00,00
10230DATA00,00,00,00,00,00,00,00
10240DATA00,00,00,00,00,00,00,00
10250DATA00,00,00,00,00,00,00,00
10260DATA00,00,00,00,00,00,00,00
10270DATA00,00,00,00,00,00,00,00
10280DATA00,00,00,00,00,00,00,00
10290DATA00,00,00,00,00,00,00,00
10300DATA00,00,00,00,00,00,00,00
10310DATA00,00,00,00,00,00,00,00
10320DATA00,00,00,00,00,00,00,00
10330DATA00,00,00,00,00,00,00,00
10340DATA44,44,EE,EE,44,44,44,44
10350DATA00,00,00,00,00,00,00,00
10360DATAFF,FF,FF,FF,FF,FF,FF,FF
10370DATAFF,FF,FF,FF,FF,FF,FF,FF
10380DATAFF,FF,FF,FF,FF,FF,FF,FF
10390DATAFF,FF,FF,FF,FF,FF,FF,FF
10400DATAFF,FF,FF,FF,FF,FF,FF,FF
10410DATAFF,FF,52,00,10,24,00,00
10420DATAFF,FF,52,00,08,20,00,00
10430DATA54,38,10,10,10,10,10,10
10440DATAFF,00,7E,00,24,00,24,00
10450DATA7E,24,24,24,24,24,24,24
10460DATA7E,00,24,00,24,18,00,00
10470DATA24,81,FF,00,00,00,00,00
10480DATA12,8A,A8,A0,A0,80,80,00
10490DATA51,00,00,00,00,00,00,00
10500DATA51,00,00,00,00,00,00,00
10510DATA54,55,15,05,05,01,01,00
10520DATA00,00,00,00,00,00,00,00
10530DATAFF,00,3F,00,1F,00,07,00
10540DATAFF,00,FF,00,FF,00,FF,00
10550DATAFF,00,FC,00,F8,00,E0,00
10560DATA00,00,00,00,00,00,00,00
10570DATA00,00,00,00,00,00,00,00
10580DATA00,00,00,00,00,00,00,00
10590DATA00,00,00,00,00,00,00,00
10600DATA00,00,00,00,00,00,00,00
10610DATA00,00,00,00,00,00,00,00
10620DATA00,00,00,00,00,00,00,00
10630DATA00,00,00,00,00,00,00,00
10640DATA00,00,00,00,00,00,00,00
10650DATA00,00,00,00,00,00,00,00
10660DATA00,00,00,00,00,00,00,00
10670DATA00,00,00,00,00,00,00,00
10680DATAFB,FB,00,DF,DF,00,FB,FB
10690DATADF,DF,00,FB,FB,00,00,FB
10700DATA00,DF,DF,00,FB,FB,00,DF
10710DATAFB,00,DF,DF,00,FB,FB,FB
10720DATA00,F7,F7,F7,00,7F,7F,7F
10730DATA00,F7,F7,F7,00,7F,7F,7F
13000restore17740:FORI=0TO(79*8)-1
13010READA$
13020VPOKE8192+I,VAL("&H"+A$):'&h2000'
13030VPOKE10240+I,VAL("&H"+A$):'&h2800'
13050NEXTI
17740DATA81,F8,F8,81,81,81,81,81
17750DATAB1,B1,B1,B1,B1,81,81,81
17760DATA81,E1,E1,E1,61,61,61,61
17770DATA61,61,61,61,61,61,61,61
17780DATA61,61,61,21,21,21,21,21
17790DATA21,21,21,2C,2C,2C,2C,11
17800DATAD1,D1,91,91,91,91,D1,D1
17810DATAD1,B1,B1,B1,B1,A1,A1,A1
17820DATA81,81,81,81,81,81,81,81
17830DATA81,81,81,81,81,81,81,81
17840DATA81,81,81,81,81,81,81,81
17850DATA81,81,81,81,81,81,81,81
17860DATA81,81,81,81,81,81,81,81
17870DATA81,81,81,81,81,81,81,81
17880DATA81,81,81,81,81,81,81,81
17890DATA81,81,81,81,81,81,81,81
17900DATA81,81,81,81,81,81,81,81
17910DATA81,81,81,81,81,81,81,81
17920DATA81,81,81,81,81,81,81,81
17930DATA81,81,81,81,81,81,81,81
17940DATA81,81,81,81,81,81,81,81
17950DATA81,81,81,81,81,81,81,81
17960DATA81,81,81,81,81,81,81,81
17970DATA81,81,81,81,81,81,81,81
17980DATA81,81,81,81,81,81,81,81
17990DATA81,81,81,81,81,81,81,81
18000DATA81,81,81,81,81,81,81,81
18010DATA81,81,81,81,81,81,81,81
18020DATA81,81,81,81,81,81,81,81
18030DATA81,81,81,81,81,81,81,81
18040DATAB1,A1,A1,A1,81,81,81,81
18050DATA81,81,81,81,81,81,81,81
18060DATA91,91,91,91,91,91,91,91
18070DATA31,31,31,31,31,31,31,31
18080DATA71,71,71,71,71,71,71,71
18090DATAB1,B1,B1,B1,B1,B1,B1,B1
18100DATAE1,E1,E1,E1,E1,E1,E1,E1
18110DATA21,21,23,23,23,23,23,23
18120DATA91,91,9E,9E,9E,9E,9E,9E
18130DATA91,61,61,61,61,61,61,61
18140DATA91,91,61,61,61,61,61,61
18150DATA91,61,61,61,61,61,61,61
18160DATA91,91,61,61,61,61,61,61
18170DATA79,91,91,91,91,91,91,91
18180DATA75,51,51,51,51,51,51,51
18190DATA75,11,11,11,11,11,11,11
18200DATA35,11,11,11,11,11,11,11
18210DATA75,51,51,51,51,51,51,51
18220DATA51,51,51,51,51,51,51,51
18230DATA51,51,51,51,51,51,51,51
18240DATA51,51,51,51,51,51,51,51
18250DATA51,51,51,51,51,51,51,51
18260DATA51,51,51,51,51,51,51,51
18270DATA51,51,51,51,51,51,51,51
18280DATA51,51,51,51,51,51,51,51
18290DATA51,51,51,51,51,51,51,51
18300DATA51,51,51,51,51,51,51,51
18310DATA51,51,51,51,51,51,51,51
18320DATA51,51,51,51,51,51,51,51
18330DATA51,51,51,51,51,51,51,51
18340DATA51,51,51,51,51,51,51,51
18350DATA51,51,51,51,51,51,51,51
18360DATA51,51,51,51,51,51,51,51
18370DATA51,51,51,51,51,51,51,51
18380DATAE1,E1,E1,A1,A1,A1,E1,E1
18390DATAE1,E1,E1,A1,A1,A1,A1,A1
18400DATAA1,81,81,81,51,51,51,81
18410DATA81,81,51,51,51,81,81,81
18420DATA81,81,81,81,81,81,81,81
18430DATA81,51,51,51,51,51,51,51
18440DATA51,31,31,31,31,31,31,31
18450DATAE1,51,E1,51,E1,51,E1,51
18460DATAE1,51,E1,51,E1,51,E1,51
18470DATAE1,FE,FE,FE,FE,FE,FE,FE
18480DATAA1,EA,EA,EA,EA,EA,EA,EA
18490DATAF1,FE,FE,FE,FE,FE,FE,FE
18500DATA11,11,11,11,11,11,11,11
18510DATA11,11,11,11,11,11,11,11
18520DATA11,11,11,11,11,11,11,11
18530DATA11,11,11,11,11,11,11,11
19000'callturbooff
19990return
