10cls:color15,1,1:keyoff
20defusr=&h003B:a=usr(0):defusr1=&h003E:a=usr1(0):defusr2=&H90:a=usr2(0):defusr3=&h41:defusr4=&h44
30screen2,2,0
40definta-z
50open"grp:"as#1
60 me$="Loading sprites":gosub 2000
70gosub9000
75gosub19000
80 me$="Loading tileset":gosub 2000
90gosub10000
100dimm(120,16):dimtd(2)
110f=0:sc=1:sl=4:td(0)=35:td(1)=33:tm=6:tf=32:mc=0:ml=88:t0=0
120x=0:y=9*8:v=8:h=8:l=9:s=0:p=0:p0=0:p1=1:p2=2:p3=3:p4=4:p5=5
130restore22000:gosub20200:gosub20500
140 me$="Main menu, press space key":gosub 2100
150gosub20200
160fori=0to31:vpoke6656+i,64:nexti
161VPOKE6688,64:VPOKE6719,64:VPOKE6720,64:VPOKE6751,64:VPOKE6752,64:VPOKE6783,64
163VPOKE6690,0
164VPOKE6696,5
165VPOKE6702,7
166fori=0to31:vpoke6784+i,64:nexti
167gosub2200
168putsprite0,(x,y),4,p
169mu=7:gosub4000
200j=STICK(0)ORSTICK(1)
210ONjGOTO230,250,270,290,310,330,350,370
220p=p0:ifmc<mlthenswapp0,p1:goto400elsegoto400
230y=y-h:p=p4:swapp4,p5:goto400
250x=x+v:y=y-h:p=p0:swapp0,p1:goto400
270x=x+v:p=p0:swapp0,p1:goto400
290x=x+v:y=y+h:p=p0:swapp0,p1:goto400
310y=y+h:p=p4:swapp4,p5:goto400
330x=x-v-4:y=y+h:p=p2:swapp2,p3:goto400
350x=x-v-4:p=p2:swapp2,p3:goto400
370x=x-v-4:y=y-h:p=p2:swapp2,p3
400IFY<40THENY=40elseify>120theny=120
410ifx<0thenx=0elseifx>250thenx=250
420px=x/8:py=y/8
430t0=m(px+1+mc,py+1)
440ift0=td(0)ort0=td(1)thengosub3000
445ift0=tmthenmu=8:gosub4000:m(px+1+mc,py+1)=tf:s=s+10:gosub2200
450PUTSPRITE0,(X,Y),4,P
460ifmc=mlthenfori=0to100:nexti
470ifmc=mlandx>240thengosub20000
480ifmcmod10=0andmc<mlthenf=0:gosub21000
485ifmc<mlthenf=7:gosub21000
500goto200
2000line(0,170)-(255,180),6,bf
2010preset(0,170):print#1,me$
2090return
2100line(0,170)-(255,180),6,bf
2110preset(0,170):print#1,me$
2120ifstrig(0)=-1then2180else2120
2180line(0,170)-(255,180),6,bf
2190return
2200vpoke6722,22+l
2230vpoke6728,22+sc
2240s$=str$(s)
2250ls=len(s$)
2260fori=1tols-1
2270vpoke6733+i,22+val(mid$(s$,i+1,1))
2280nexti
2290return
3000'playermuere'
3010mu=5:gosub4000
3020l=l-1:gosub2200
    3030 if l<=0 then put sprite 0,(0,212),4,p:gosub 19000:me$="Game over":gosub 2100:goto 110
3040mc=0:f=7:gosub21000
3050x=0:y=9*8:PUTSPRITE0,(X,Y),4,0
    3060 me$="Ready press space":gosub 2100
3090return
4000a=usr2(0)
4060ifmu=6thenplay"t250o4v12dv9e"
4070ifmu=7thenplay"O3L8V4M8000AADFG2AAAA"
4080ifmu=8thensound1,2:sound8,16:sound12,5:sound13,9
4090ifmu=9thenPLAY"o3l64t255v4m6500c"
4100ifmu=10thensound1,2:sound6,25:sound8,16:sound12,1:sound13,9
4110ifmu=11thensound1,0:sound6,25:sound8,16:sound12,4:sound13,9
4199return
20000mu=7:gosub4000
20005sc=sc+1
20010PUTSPRITE0,(0,212),4,0
    20020 if sc=sl then gosub 19000:me$="Congratulations, final":gosub 2100:goto 110
    20030 me$="Loading next level...":gosub 2000
20040gosub20200
20050mc=0:f=0:gosub21000
20060f=7:gosub21000
20070gosub2200
20075x=0:y=9*8:putsprite0,(x,y),4,p
    20080 me$="Press space key":gosub 2100
20090return
20200callturboon(m())
20205forr=0to15
20210READmp$:po=0
20220forc=0tolen(mp$)step4
20230r$=mid$(mp$,c+1,2)
20240tn$=mid$(mp$,c+3,2)
20250tn=val("&h"+tn$):tn=tn-1
20260re=val("&h"+r$)
20270fori=0tore
20280iftn<>0andtn<>-1thenm(po,r)=tn:po=po+1
20300nexti
20310nextc
20320nextr
20325callturbooff
20330return
20500_TURBOON(m())
20510md=6144
20520forf=0to15
20530forc=0to31
20540tn=m(c,f)
20550VPOKEmd,tn
20560md=md+1
20570nextc
20580nextf
20590_TURBOOFF
20599return
21000_TURBOON(m(),mc,f)
21002mc=mc+1
21005md=6144+(32*f)
21010forf=fto15
21020forc=mcto31+mc
21030tn=m(c,f)
21040VPOKEmd,tn
21050md=md+1
21060nextc
21070nextf
21080_TURBOOFF
21090return
22000data1f23
22010data0e230010001100120d23
22020data0923001000110012012300300031003201230010001100120823
22030data092300300031003206230030003100320823
22040data1f23
22050data1f23
22060data0823001000110012022300130014001502230010001100120723
22070data0823003000310032022300330034003502230030003100320723
22080data1f23
22090data1f23
22100data092300100011001206230010001100120823
22110data0923003000310032012300100011001201230030003100320823
22120data0e230030003100320d23
22130data1f23
22140data1f23
22150data1f23
22200data1b230125022300250623012515230125002306250e23002500230125012303251323
22210data1223012506230125012301250623012503230125002301250c23092501230025062301250123012500230125012303250023012504230125002301250623
22220data002301250a230125022301250423032501230125042303250323012500230125012300250223012502230b250123012502230125002301250123012500230125012303250023012503230225002301250623
22230data00230125012301250623012500230325042303250123012504230325002301250023012500230125012300250223012502230b25012301250223012500230125012301250023012501230325002301250223032500230125022302250023
22240data0023012501230125062301250023032502230525012301250023012501230325002301250023012500230125012300250223012502230b250123012502230125002301250123012500230125002304250023082500230125022302250023
22250data00230125012302250323032500230325022305250123012500230125012303250023012500230125002304250223012502230b25012301250223012500230125012301250023012500231125022302250023
22260data7725
22270data1f240f2101240f2104240d21022406210e240921
22280data06240d210024032105240f2101240f2104240d21022406210e240921
22290data06240d21002403210524032100070a2101240321012403210a24022100070121022404210224062100240c21002404210424
22300data0b2109240321072404210a24032101240d210224032102240b2103240c2100240421040a
22310data0b2103240921002411210024072101240d210224032102240b2103240c21002404210424
22320data062404210324092100241121002407210124032105240321022403210b240221032402210a240421040a
22340data062404210324092100240c2105240321052403210524102101240621032412210424
22350data06240c210124072104240e21052408210024102101241d21040a
22360data06240621000704210124072104240e21052408210024102101240d211424
22400data7723
22410data7723
22420data1e2301480d2301480c230148002301480023014807230148002301480a23014800230148002301480c2301480223
22430data02230048002301480023004811230248002301480d2301480c230748072304480a2307480c2301480223
22440data02230548102306480d2301480c230748072304480a2307480c2301480223
22450data02230548102306480d2301480c230748072304480a2307480c2301480223
22460data6d260922
22470data0d221a2102221421012211210007082106221121
22480data0d221a2102221421012209210d22032103221421
22490data0d22062100220421102205210822022100070121012213210322032103220a210922
22500data0a2102220121000703210022112101220e2101220421042211210322032103220a210322050a
22510data0a21032205210022112101220e2101220521032205210222032108220421022202211122
22520data052204210322052101221021012205210a22062102220421032203210a220221022202210b22050a
22540data06220d21022206210a220a210122152100220c21012213210622
22550data07220c2103221b210122152100220c21012213210022050a
22560data07220c2104221a210122152100220c21012213210622
22600data7748
22610data034801230848022311480023084802230648002303480123154802210a480323094802230348
22620data084801230a48032101480223034802231b48022103480123084803210b48012305480221024800230448
22630data0b48002106480621004802230048022113480021084804210748022100480721104804210748
22640data0148012105480321054806210448072101480123024801210348052104480621044810210c48072104480021
22650data7721
22660data7724
22670data04240b210024092103240d210124142104240d2107240b21002404210124030a
22680data04240b21002409210324082100070321012414210424132101240b21002405210424
22690data10210024092103240421052403210024042100240e210424052103240a2100240421072406210024020a
22700data052100070021042403210024032100240b210424062100240321012405210124042106240221000700210b24092100240421002408210224
22710data08210824032100240b210024022100240a21052402210124092101240f21002408210124042100240321002404210024000a
22720data04240f21012402210924022100240f21002402210124092101240f21002408210124002104240321012403210124
22730data04240f21012402210924022104240b210024022105240421022402210124042106240d2102240321022402210124
22740data04240a210624132100240b210024022101240e2101240a210024142100240621
22750data04240a21062413210d24022101240e2101240a210024022102240e2100240621
22800data1b230125022300250623012515230125002306250e23002500230125012303251323
22810data1223012506230125012301250623012503230125002301250c23092501230025062301250123012500230125012303250023012504230125002301250623
22820data002301250a230125022301250423032501230125042303250323012500230125012300250223012502230b250123012502230125002301250123012500230125012303250023012503230225002301250623
22830data00230125012301250623012500230325042303250123012504230325002301250023012500230125012300250223012502230b25012301250223012500230125012301250023012501230325002301250223032500230125022302250023
22840data0023012501230125062301250023032502230525012301250023012501230325002301250023012500230125012300250223012502230b250123012502230125002301250123012500230125002304250023082500230125022302250023
22850data00230125012302250323032500230325022305250123012500230125012303250023012500230125002304250223012502230b25012301250223012500230125012301250023012500231125022302250023
22860data7725
22870data1f240f2101240f2104240d21022406210e240921
22880data06240d210024032105240f2101240f2104240d21022406210e240921
22890data06240d210024032105240f2101240321012403210a240321042404210224062100240c2100240421040a
22900data0b2109240321072404210a24032101240d210024052102240b2103240c21002404210424
22910data0b2103240921002411210024072101240d210024052102240b2103240c2100240421040a
22920data062404210324092100241121002407210124032105240321032402210b240221032402210a2404210424
22940data062404210324092100240c210524032105240321052410210124062103241221040a
22950data06240c210124072104240e21052408210024102101241d210424
22960data06240c210124072104240e21052408210024102101240d211424
23000data7723
23010data7723
23020data1e2301480d2301480c230148002301480023014807230148002301480a23014800230148002301480c2301480223
23030data02230048002301480023004811230248002301480d2301480c230748072304480a2307480c2301480223
23040data02230548102306480d2301480c230748072304480a2307480c2301480223
23050data02230548102306480d2301480c230748072304480a2307480c2301480223
23060data242603214e26
23070data0b221c210222142101221b2106221121
23080data0022000609221c2102221421012203211322032103221421
23090data0b22052103220321112202210b220521012213210322032103220a210922
23100data0a21002207210122032101220b2101220e2101220321052211210322032103220a21012205210122
23110data0a21032204210122032101220b2101220e210122032105220221052203210822042102220221092205210122
23120data072202210522022101221121012203210c22032105220221052203210a22022102220221092205210122
23140data07220b21012208210a220a210122152100220c21012216210322
23150data07220b2101221e210122152100220c21012216210322
23160data07220b2101221e210122152100220c21012216210322
23200data7748
23210data034801230848022311480023084802230648002303480123154802210a480323094802230348
23220data084801230a48032101480223034802231b48022103480123084803210b48012305480221024800230448
23230data0b48002106480621004802230048022113480021084804210748022100480721104804210748
23240data0148012105480321054806210448072101480123024801210348052104480621044810210c48072104480021
23250data7721
23260data7724
23270data04240a210124092103240d210124142104240d2107240b21002409210024
23280data04240a210124092103240d21012414210424132101240b21002409210024
23290data072104240221012402210124042103240421052403210024022102240e2104240221062409210224022108240221022403210024
23300data0721042402210124022101240b2104240621002402210224052101240221082402210d240221022402210124042100240221032402210124
23310data07210924022101240b21002402210024052101240221052402210124092101240f2100240221022402210124042100240221032402210124
23320data0424022104240721012402210924022100240f21002402210124092101240f21002408210124002104240221032402210124
23340data0424022104240721012402210924022104240b210024022105240321032402210124042106240d2102240321022402210124
23350data04240a210624132100240b210024022101240e2101240a210024142100240621
23360data04240a21062413210d24022101240e2101240a210024022102240e2100240621
9000callturboon
9005fori=0to31:putspritei,(0,212),0,0:nexti
9010'callturboon
9020fori=0to(32*6)-1
9030readb:vpoke14336+i,b
9040nexti
9050callturbooff
9360data0,0,0,0,33,195,192,192
9370data192,63,63,62,96,160,240,240
9380data0,0,0,224,208,252,108,112
9390data240,240,240,240,248,102,54,48
9410data0,0,0,0,0,0,240,112
9420data48,15,15,15,15,5,6,6
9430data0,0,240,120,116,31,27,28
9440data60,252,252,188,48,176,176,248
9445data0,0,0,7,11,63,54,14
9450data15,15,15,15,31,102,108,12
9460data0,0,0,0,132,194,2,2
9470data2,252,252,124,6,4,14,14
9490data0,0,15,30,46,248,216,56
9500data60,63,63,61,12,13,13,31
9510data0,0,0,0,0,0,14,14
9520data12,240,240,240,240,160,96,96
9530remdatadefinitionsprite4,name:Sprite-3
9540data0,0,7,15,31,7,3,3
9550data3,7,15,15,15,6,6,15
9560data0,0,192,224,240,192,128,128
9570data128,192,224,224,224,192,192,224
9590data0,0,7,15,31,7,3,3
9600data19,15,15,15,15,12,16,0
9610data0,0,192,224,240,192,128,128
9620data144,224,224,224,224,192,32,0
9990return
10000callturboon
10030restore10040:FORI=0TO(79*8)-1
10035READA$
10036VPOKEI,VAL("&H"+A$)
10037VPOKE2048+I,VAL("&H"+A$)
10038VPOKE4096+I,VAL("&H"+A$)
10039NEXTI
10040DATAE7,40,20,7E,3C,18,00,00
10050DATA18,3C,3C,18,00,56,56,74
10060DATA00,06,0A,14,20,30,48,00
10070DATA00,00,00,08,10,20,40,00
10080DATA00,00,00,18,2C,2C,18,00
10090DATA00,18,3C,42,42,42,42,00
10100DATAFF,FF,C3,81,C2,C3,C3,00
10110DATA24,FE,A4,7E,25,25,7F,24
10120DATA00,7C,44,7C,00,10,10,00
10130DATAFF,04,02,7D,02,04,00,00
10140DATA00,20,40,BE,40,20,00,00
10150DATA00,08,14,2A,08,08,08,08
10160DATA00,10,10,10,54,28,10,00
10170DATA22,22,77,77,22,22,22,22
10180DATA00,04,08,18,3C,3C,3C,3C
10190DATA01,07,0F,0F,1F,3E,9C,3E
10200DATAC3,81,3C,18,18,3C,18,3C
10210DATA80,E0,F0,F0,F8,7C,39,7C
10220DATAFF,07,1E,3C,3C,3C,20,08
10230DATA00,00,00,00,00,C3,C3,00
10240DATA00,E0,78,3C,3E,1C,18,10
10250DATA00,00,00,00,00,00,00,00
10260DATA00,38,44,4C,10,64,44,38
10270DATA00,0C,04,04,00,04,04,04
10280DATA00,38,04,04,38,40,40,78
10290DATA00,38,04,04,38,04,04,38
10300DATA00,44,44,44,38,04,04,04
10310DATA00,38,40,40,38,04,04,38
10320DATA00,38,40,40,38,44,44,38
10330DATA00,38,04,04,00,04,04,04
10340DATA00,38,44,44,38,44,44,38
10350DATA00,38,44,44,38,04,04,38
10360DATAFF,FF,FF,FF,FF,FF,FF,FF
10370DATAFF,FF,FF,FF,FF,FF,FF,FF
10380DATAFF,FF,FF,FF,FF,FF,FF,FF
10390DATAFF,FF,FF,FF,FF,FF,FF,FF
10400DATAFF,FF,FF,FF,FF,FF,FF,FF
10410DATAFF,FF,52,00,10,24,00,00
10420DATAFF,FF,52,00,08,20,00,00
10430DATA54,38,10,10,10,10,10,10
10440DATAFF,00,7E,00,24,00,24,00
10450DATA7E,24,24,24,24,24,24,24
10460DATA7E,00,24,00,24,18,00,00
10470DATA24,81,FF,00,00,00,00,00
10480DATA00,00,00,00,00,00,00,00
10490DATA00,00,00,00,00,00,00,00
10500DATA00,00,00,00,00,00,00,00
10510DATAE2,E1,7E,C1,E0,F0,F8,FF
10520DATA81,81,00,00,BD,FF,FF,FF
10530DATAC7,78,81,83,07,0F,3F,FF
10540DATAFF,FF,02,01,00,00,00,00
10550DATA3C,3C,04,18,3C,3C,3C,00
10560DATA00,20,00,00,00,00,00,00
10570DATA00,00,00,00,00,00,00,00
10580DATA00,00,00,00,00,00,00,00
10590DATA00,00,00,00,00,00,00,00
10600DATA00,00,00,00,00,00,00,00
10610DATA00,00,00,00,00,00,00,00
10620DATA00,00,00,00,00,00,00,00
10630DATA00,00,00,00,00,00,00,00
10640DATA00,00,00,00,00,00,00,00
10650DATA00,00,00,00,00,00,00,00
10660DATA00,00,00,00,00,00,00,00
10670DATA00,00,00,00,00,00,00,00
10680DATAFB,FB,00,DF,DF,00,FB,FB
10690DATADF,DF,00,FB,FB,00,00,FB
10700DATA00,DF,DF,00,FB,FB,00,DF
10710DATAFB,00,DF,DF,00,FB,FB,FB
10720DATA00,F7,F7,F7,00,7F,7F,7F
10730DATA00,F7,F7,F7,00,7F,7F,7F
10740DATA00,F7,F7,F7,00,7F,7F,7F
10750DATA6D,DB,DB,6D,6D,DB,DB,6D
10760DATA6D,DB,DB,6C,6C,DB,DB,6C
10770DATAFF,66,66,00,00,66,66,00
10780DATAFF,66,66,00,00,66,66,00
10790DATAFF,99,99,FF,FF,99,99,FF
10800DATA12,8A,A8,A0,A0,80,80,00
13000restore17740:FORI=0TO(79*8)-1
13010READA$
13020VPOKE8192+I,VAL("&H"+A$):'&h2000'
13030VPOKE10240+I,VAL("&H"+A$):'&h2800'
13040VPOKE12288+I,VAL("&H"+A$):'&h3000'
13050NEXTI
13060callturbooff
17740DATA81,F8,F8,81,81,81,81,81
17750DATAB1,B1,B1,B1,B1,81,81,81
17760DATA81,E1,E1,E1,61,61,61,61
17770DATA61,61,61,61,61,61,61,61
17780DATA61,61,61,21,21,21,21,21
17790DATA21,21,21,2C,2C,2C,2C,11
17800DATA91,91,A9,EA,EA,A9,E9,E9
17810DATAA1,A1,A1,A1,A1,A1,A1,A1
17820DATAA1,B1,B1,B1,B1,A1,A1,A1
17830DATAB1,8B,8B,8B,8B,8B,8B,8B
17840DATA11,81,81,81,81,81,81,81
17850DATA81,81,81,81,81,81,81,81
17860DATA81,81,81,81,81,81,81,81
17870DATAB1,A1,A1,A1,81,81,81,81
17880DATA81,D1,D1,91,91,91,91,D1
17890DATAF7,F7,F7,B7,F7,F7,BF,BF
17900DATAF7,EF,EB,FB,FB,EB,BF,BF
17910DATAF7,F7,F7,B7,F7,F7,BF,BF
17920DATA51,E5,F5,F5,F5,E5,45,E5
17930DATAE5,E5,E5,E5,E5,E5,E5,E5
17940DATAE5,E5,F5,F5,F5,F5,F5,E5
17950DATA11,11,11,11,11,11,11,11
17960DATA11,31,31,31,31,31,31,31
17970DATA31,31,31,31,31,31,31,31
17980DATA31,31,31,31,31,31,31,31
17990DATA31,31,31,31,31,31,31,31
18000DATA31,31,31,31,31,31,31,31
18010DATA31,31,31,31,31,31,31,31
18020DATA31,21,31,31,31,31,31,31
18030DATA31,31,31,31,31,31,31,31
18040DATA31,31,31,31,31,31,31,31
18050DATA31,31,31,31,31,31,31,31
18060DATA91,91,91,91,91,91,91,91
18070DATA31,31,31,31,31,31,31,31
18080DATA71,71,71,71,71,71,71,71
18090DATAB1,B1,B1,B1,B1,B1,B1,B1
18100DATAE1,E1,E1,E1,E1,E1,E1,E1
18110DATA21,21,23,23,23,23,23,23
18120DATA91,91,9E,9E,9E,9E,9E,9E
18130DATA91,61,61,61,61,61,61,61
18140DATA91,91,61,61,61,61,61,61
18150DATA91,61,61,61,61,61,61,61
18160DATA91,91,61,61,61,61,61,61
18170DATA79,91,91,91,91,91,91,91
18180DATA91,91,91,91,91,91,91,91
18190DATA91,91,91,91,91,91,91,91
18200DATA91,91,91,91,91,91,91,91
18210DATAFB,FB,FB,7F,7F,7F,7F,7F
18220DATAFB,EB,EB,EB,EB,F1,F1,F1
18230DATAEB,BF,BF,7F,7F,7F,7F,7F
18240DATA51,51,E5,E5,E5,E5,E5,E5
18250DATAE5,E5,45,E5,E5,F5,E5,E5
18260DATAE5,E5,E5,E5,E5,E5,E5,E5
18270DATA11,11,11,11,11,11,11,11
18280DATA11,11,11,11,11,11,11,11
18290DATA11,11,11,11,11,11,11,11
18300DATA11,11,11,11,11,11,11,11
18310DATA11,11,11,11,11,11,11,11
18320DATA11,11,11,11,11,11,11,11
18330DATA11,11,11,11,11,11,11,11
18340DATA11,11,11,11,11,11,11,11
18350DATA11,11,11,11,11,11,11,11
18360DATA11,11,11,11,11,11,11,11
18370DATA11,11,11,11,11,11,11,11
18380DATAE1,E1,E1,A1,A1,A1,E1,E1
18390DATAE1,E1,E1,A1,A1,A1,A1,A1
18400DATAA1,81,81,81,51,51,51,81
18410DATA81,81,51,51,51,81,81,81
18420DATA81,81,81,81,81,81,81,81
18430DATA81,51,51,51,51,51,51,51
18440DATA51,31,31,31,31,31,31,31
18450DATAE1,51,E1,51,E1,51,E1,51
18460DATAE1,51,E1,51,E1,51,E1,51
18470DATAE1,FE,FE,FE,FE,FE,FE,FE
18480DATAA1,EA,EA,EA,EA,EA,EA,EA
18490DATAF1,FE,FE,FE,FE,FE,FE,FE
18500DATA75,51,51,51,51,51,51,51
18510DATA75,11,11,11,11,11,11,11
18990return
19000FORt=6144TO(6144+768)-97
19010vpoket,255
19020nextt
19090return
